<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cardif NEXT - Zä¸–ä»£å¤¢æƒ³åŠ é€Ÿå™¨ (v28)</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        /* * ===============================================
         * Cardif NEXT é¢¨æ ¼è¨­å®š
         * ===============================================
         */
        :root {
            --primary-color: #00915a; /* æ³•å·´ç¶  */
            --primary-dark: #005c3a;
            --accent-color: #ff5e00;  /* æ´»åŠ›æ©˜ */
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --text-main: #2c3e50;
            --text-sub: #7f8c8d;
            --vip-gold: #d4af37;
            --vip-bg: linear-gradient(135deg, #141E30 0%, #243B55 100%);
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: #2c3e50;
            display: flex;
            justify-content: center;
            align-items: center;
            padding-top: 20px;
            padding-bottom: 20px;
            height: 100vh;
            box-sizing: border-box;
            margin: 0;
        }

        .phone-mockup {
            width: 375px;
            height: 812px;
            background: var(--bg-color);
            border: 14px solid #1a1a1a;
            border-radius: 40px;
            box-shadow: 0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22);
            position: relative;
            overflow: hidden;
        }

        .phone-mockup::before {
            content: '';
            position: absolute;
            top: 0; left: 50%;
            transform: translateX(-50%);
            width: 180px; height: 25px;
            background: #1a1a1a;
            border-bottom-left-radius: 18px;
            border-bottom-right-radius: 18px;
            z-index: 100;
        }

        .screen {
            width: 100%; height: 100%;
            position: absolute; top: 0; left: 0;
            background: var(--bg-color);
            overflow: hidden;
        }
        
        .page {
            width: 100%; height: 100%;
            padding: 50px 20px 80px 20px;
            box-sizing: border-box;
            overflow-y: auto;
            display: none;
            position: absolute;
            background-color: var(--bg-color);
            -webkit-overflow-scrolling: touch;
        }
        
        .page.active { display: block; }
        
        .page.sub-page {
            padding: 50px 20px 20px 20px;
            z-index: 30;
            background-color: #ffffff;
        }

        /* * ===============================================
         * é€šç”¨å…ƒä»¶
         * ===============================================
         */
        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            transition: transform 0.1s;
        }
        .card:active { transform: scale(0.98); }

        .section-title {
            font-size: 18px; font-weight: 700; margin-bottom: 12px; color: var(--text-main);
            display: flex; justify-content: space-between; align-items: center;
        }

        .page-title { font-size: 26px; font-weight: 800; margin-bottom: 20px; color: var(--text-main); }
        .sub-page-title { font-size: 20px; text-align: center; margin-bottom: 20px; padding-top: 10px; }

        .back-button {
            position: absolute; top: 45px; left: 20px; font-size: 24px;
            font-weight: 600; color: var(--primary-color); cursor: pointer; z-index: 40; padding: 5px 10px;
        }

        .btn-primary {
            background: var(--primary-color); color: white; border: none; width: 100%;
            padding: 14px; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer;
        }
        .btn-small {
            padding: 6px 12px; border-radius: 15px; border: 1px solid #ddd;
            background: white; font-size: 12px; cursor: pointer;
        }
        .btn-view-more {
            background: #eee; color: #666; width: 100%; padding: 12px;
            border-radius: 8px; border: none; margin-top: 15px; font-size: 14px; cursor: pointer;
        }

        /* * ===============================================
         * é¦–é å…ƒä»¶ (å«éˆ´éº)
         * ===============================================
         */
        .home-header {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;
        }
        .app-name { font-size: 26px; font-weight: 800; color: var(--text-main); }
        
        .header-actions { display: flex; align-items: center; gap: 12px; }
        
        .user-badge {
            font-size: 12px; background: #e8f8f5; color: var(--primary-color);
            padding: 4px 8px; border-radius: 12px; font-weight: 600;
        }

        /* éˆ´éºæ¨£å¼ */
        .notification-bell {
            position: relative; cursor: pointer; width: 28px; height: 28px;
            display: flex; align-items: center; justify-content: center;
        }
        /* SVG Bell Icon */
        .bell-icon svg {
            width: 24px; height: 24px; stroke: #2c3e50; stroke-width: 2; fill: none;
        }
        .notification-badge {
            position: absolute; top: -2px; right: -2px;
            width: 14px; height: 14px;
            background: red; color: white;
            border-radius: 50%; font-size: 9px;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; border: 1px solid white;
        }

        .wallet-card {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white; padding: 24px; cursor: pointer;
        }
        .wallet-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 10px; }
        .wallet-amount { font-size: 32px; font-weight: 700; }
        .progress-bg { background: rgba(255,255,255,0.3); height: 8px; border-radius: 4px; overflow: hidden; margin-top: 8px; }
        .progress-fill { background: #fff; height: 100%; border-radius: 4px; transition: width 0.5s ease; }
        
        .transaction-item {
            display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid #eee;
        }
        .transaction-item:last-child { border-bottom: none; }
        .t-icon { width: 36px; height: 36px; background: #f0f2f5; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 18px; margin-right: 12px; }
        .t-info { flex: 1; }
        .t-name { font-weight: 600; font-size: 14px; }
        .t-date { font-size: 11px; color: #999; }
        .t-amount { font-weight: bold; font-size: 14px; color: var(--text-main); }
        .t-amount.expense { color: var(--text-main); }

        /* * ===============================================
         * é€šçŸ¥ä¸­å¿ƒæ¨£å¼ (Notification Center)
         * ===============================================
         */
        .noti-section-title {
            font-size: 14px; color: #7f8c8d; margin: 20px 0 10px 0; font-weight: 600; padding-left: 5px;
        }
        .noti-item {
            background: white; border-radius: 12px; padding: 15px; margin-bottom: 12px;
            display: flex; gap: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); border: 1px solid #eee;
        }
        .noti-icon {
            width: 40px; height: 40px; border-radius: 50%; background: #f0f2f5;
            display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0;
        }
        .noti-icon.security { background: #ffebeb; color: #e74c3c; }
        .noti-icon.promo { background: #e8f8f5; color: var(--primary-color); }
        
        .noti-content { flex: 1; }
        .noti-title { font-size: 14px; font-weight: bold; color: #333; margin-bottom: 4px; }
        .noti-desc { font-size: 12px; color: #666; line-height: 1.4; }
        .noti-time { font-size: 10px; color: #999; margin-top: 5px; text-align: right; }
        
        /* æ´»å‹•æ¨å»£å°ˆç”¨æ¨£å¼ */
        .event-card-img {
            width: 100%; height: 120px; background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d); /* æ¨¡æ“¬éœ“è™¹ç‡ˆå…‰æ„Ÿ */
            border-radius: 8px; margin-bottom: 10px; display: flex; align-items: center; justify-content: center;
            color: white; font-weight: bold; font-size: 18px; text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            position: relative; overflow: hidden;
        }
        .event-card-img::after {
            content: 'Cardif NEXT Lab'; position: absolute; bottom: 10px; left: 10px; font-size: 20px; font-style: italic;
        }
        .event-tags { display: flex; gap: 5px; margin-bottom: 8px; flex-wrap: wrap; }
        .event-tag { font-size: 10px; background: #eee; padding: 2px 6px; border-radius: 4px; color: #555; }

        /* * ===============================================
         * æŠ•è³‡é å…ƒä»¶
         * ===============================================
         */
        .risk-selector { display: flex; gap: 10px; margin-bottom: 20px; background: #e0e0e0; padding: 4px; border-radius: 12px; }
        .risk-btn { flex: 1; padding: 10px; border-radius: 10px; text-align: center; font-size: 13px; cursor: pointer; transition: all 0.3s; color: #666; font-weight: 500; }
        .risk-btn.active { background: white; color: var(--text-main); font-weight: bold; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        .identity-card { background: white; border-radius: 20px; padding: 20px 25px; margin-bottom: 20px; position: relative; overflow: hidden; box-shadow: 0 8px 20px rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center; transition: background 0.3s; }
        .identity-card::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 6px; background: #ccc; transition: background 0.3s; }
        .identity-content { z-index: 2; }
        .identity-label { font-size: 12px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; color: #666; font-weight: 600; }
        .identity-value { font-size: 22px; font-weight: 800; color: #333; line-height: 1.2; }
        .identity-watermark { font-size: 60px; position: absolute; right: 15px; bottom: -10px; opacity: 0.15; transform: rotate(-10deg); z-index: 1; transition: all 0.3s; }

        .allocation-legend { margin-top: 15px; }
        .legend-item { display: flex; justify-content: space-between; font-size: 13px; margin-bottom: 8px; border-bottom: 1px dashed #eee; padding-bottom: 4px; }
        .legend-color { display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin-right: 8px; }

        /* * ===============================================
         * çå‹µé å…ƒä»¶
         * ===============================================
         */
        .level-dashboard {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            border-radius: 20px; padding: 20px; color: white;
            box-shadow: 0 10px 20px rgba(44, 62, 80, 0.3); margin-bottom: 20px;
            position: relative; overflow: hidden;
        }
        .level-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; }
        .level-avatar { width: 50px; height: 50px; border-radius: 50%; background: #fff; display: flex; align-items: center; justify-content: center; font-size: 24px; border: 3px solid var(--primary-color); }
        .level-info { flex: 1; margin-left: 15px; }
        .level-title { font-size: 18px; font-weight: 800; margin-bottom: 2px; }
        .level-coin { color: #f1c40f; font-weight: bold; font-size: 14px; }
        
        .xp-container { margin-bottom: 15px; }
        .xp-text { display: flex; justify-content: space-between; font-size: 11px; margin-bottom: 5px; opacity: 0.8; }
        .xp-bar-bg { width: 100%; height: 10px; background: rgba(255,255,255,0.2); border-radius: 5px; overflow: hidden; }
        .xp-bar-fill { height: 100%; background: linear-gradient(90deg, #00b09b, #96c93d); width: 50%; border-radius: 5px; transition: width 1s ease; }
        .xp-condition { font-size: 10px; color: #bdc3c7; text-align: right; margin-top: 3px; }

        .mini-map { display: flex; align-items: center; justify-content: space-between; margin-bottom: 5px; position: relative; padding: 0 10px; }
        .mini-map::before { content: ''; position: absolute; top: 50%; left: 20px; right: 20px; height: 2px; background: rgba(255,255,255,0.3); z-index: 0; }
        .map-point { width: 30px; height: 30px; border-radius: 50%; background: #7f8c8d; display: flex; align-items: center; justify-content: center; font-size: 14px; position: relative; z-index: 1; border: 2px solid #34495e; }
        .map-point.active { background: #f1c40f; border-color: white; transform: scale(1.2); box-shadow: 0 0 10px #f1c40f; }
        .map-point.locked { background: #95a5a6; color: #555; }
        .map-point span { position: absolute; bottom: -20px; width: 60px; text-align: center; font-size: 9px; color: #bdc3c7; }

        .mission-tabs { display: flex; border-bottom: 1px solid #eee; margin-bottom: 15px; }
        .mission-tab-btn { flex: 1; padding: 12px; background: none; border: none; font-size: 14px; color: #7f8c8d; font-weight: 600; cursor: pointer; border-bottom: 3px solid transparent; transition: all 0.3s; }
        .mission-tab-btn.active { color: var(--primary-color); border-bottom-color: var(--primary-color); }
        .mission-panel { display: none; animation: fadeIn 0.3s; }
        .mission-panel.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        .quest-item { display: flex; align-items: center; justify-content: space-between; background: #f9f9f9; padding: 12px; border-radius: 12px; margin-bottom: 10px; border: 1px solid #eee; }
        .quest-icon { font-size: 24px; margin-right: 12px; width: 30px; text-align: center; }
        .quest-info h4 { margin: 0 0 4px 0; font-size: 14px; color: #333; }
        .quest-info p { margin: 0; font-size: 11px; color: var(--primary-color); font-weight: bold; }
        .quest-action-btn { background: var(--primary-color); color: white; border: none; padding: 6px 12px; border-radius: 20px; font-size: 12px; cursor: pointer; }
        .quest-action-btn.disabled { background: #ccc; cursor: default; }

        .badge-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 10px 0; }
        .badge-item { display: flex; flex-direction: column; align-items: center; text-align: center; padding: 10px; border-radius: 10px; background: #fdfdfd; border: 1px solid #eee; }
        .badge-icon { width: 50px; height: 50px; border-radius: 50%; background: #eee; display: flex; align-items: center; justify-content: center; font-size: 24px; margin-bottom: 8px; filter: grayscale(100%); opacity: 0.5; border: 2px solid #ddd; }
        .badge-item.unlocked .badge-icon { filter: grayscale(0%); opacity: 1; background: #fff; border-color: #f1c40f; box-shadow: 0 0 10px rgba(241, 196, 15, 0.3); }
        .badge-name { font-size: 11px; font-weight: bold; color: #555; margin-bottom: 2px; }
        .badge-desc { font-size: 9px; color: #999; }

        .vip-zone { background: var(--vip-bg); border-radius: 20px; padding: 20px; margin-bottom: 25px; color: #fff; box-shadow: 0 10px 25px rgba(20, 30, 48, 0.4); position: relative; overflow: hidden; border: 1px solid rgba(255, 215, 0, 0.2); }
        .vip-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 10px; }
        .vip-title { font-size: 18px; font-weight: 800; color: var(--vip-gold); display: flex; align-items: center; }
        .vip-condition { font-size: 11px; background: rgba(212, 175, 55, 0.2); color: var(--vip-gold); padding: 4px 10px; border-radius: 20px; border: 1px solid rgba(212, 175, 55, 0.5); }
        .vip-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .vip-item { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 10px; text-align: center; position: relative; border: 1px solid rgba(255,255,255,0.1); }
        .vip-lock-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; flex-direction: column; justify-content: center; align-items: center; border-radius: 12px; z-index: 5; backdrop-filter: blur(2px); }
        .lock-icon { font-size: 24px; margin-bottom: 5px; }
        .lock-text { font-size: 10px; color: #ddd; }

        .general-zone {}
        .general-title { font-size: 18px; font-weight: 700; margin-bottom: 12px; color: var(--text-main); display: flex; align-items: center; }
        .general-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .general-item { background: #fff; border-radius: 12px; padding: 15px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.05); position: relative; border: 1px solid #f0f0f0; }
        .general-btn { background: var(--primary-color); color: white; border: none; padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: bold; margin-top: 8px; width: 100%; cursor: pointer; box-shadow: 0 3px 8px rgba(0, 145, 90, 0.2); }
        .general-btn:active { transform: scale(0.95); }

        /* * ===============================================
         * å…¶ä»–å…ƒä»¶ (Wallet, Maps, etc.)
         * ===============================================
         */
        #page-wallet-detail { display: none; flex-direction: column; }
        #page-wallet-detail.active { display: flex; }
        .confetti-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; overflow: hidden; z-index: 10; }
        .confetti { position: absolute; font-size: 20px; animation: fall linear forwards; }
        @keyframes fall { 0% { transform: translateY(-50px) rotate(0deg); opacity: 1; } 100% { transform: translateY(800px) rotate(360deg); opacity: 0; } }
        .piggy-icon-container { width: 150px; height: 150px; margin-bottom: 20px; position: relative; }
        .coin-drop { position: absolute; top: -40px; left: 50%; transform: translateX(-50%); font-size: 40px; animation: dropCoin 2s infinite; }
        @keyframes dropCoin { 0% { top: -60px; opacity: 1; } 50% { top: 10px; opacity: 1; } 60% { top: 10px; opacity: 0; } 100% { top: 10px; opacity: 0; } }
        .bottom-sheet { background: white; color: #333; border-top-left-radius: 24px; border-top-right-radius: 24px; padding: 30px 20px 40px 20px; box-shadow: 0 -5px 20px rgba(0,0,0,0.1); animation: slideUp 0.5s cubic-bezier(0.25, 1, 0.5, 1); z-index: 50; margin-top: auto; width: 100%; box-sizing: border-box; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

        .process-modal { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 200; display: none; justify-content: center; align-items: center; }
        .process-card { background: white; width: 85%; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .step-item { display: flex; align-items: center; margin-bottom: 15px; opacity: 0.3; transition: all 0.5s; }
        .step-item.active { opacity: 1; transform: translateX(5px); }
        .step-icon { width: 30px; height: 30px; border-radius: 50%; background: #eee; display: flex; align-items: center; justify-content: center; margin-right: 15px; font-size: 14px; }
        .step-item.active .step-icon { background: var(--primary-color); color: white; }
        .step-text { font-size: 14px; font-weight: 500; }
        .step-desc { font-size: 12px; color: #7f8c8d; }

        .shield-stack-container { width: 100%; background: #f0f0f0; border-radius: 10px; height: 30px; display: flex; margin: 15px 0; overflow: hidden; position: relative; }
        .stack-bar-savings { background: #3498db; height: 100%; display: flex; align-items: center; justify-content: center; color: white; font-size: 10px; width: 20%; }
        .stack-bar-insurance { background: rgba(255, 165, 0, 0.6); height: 100%; display: flex; align-items: center; justify-content: center; color: #d35400; font-size: 10px; font-weight: bold; width: 80%; position: relative; }
        .stack-bar-insurance::after { content: 'ğŸ›¡ï¸'; position: absolute; right: 10px; }
        .pass-card { background: white; text-align: center; padding: 30px 20px; border-radius: 20px; border: 2px dashed var(--primary-color); }
        #qrcode { margin: 20px auto; display: flex; justify-content: center; }
        .pass-serial { font-family: monospace; letter-spacing: 2px; color: #333; background: #eee; padding: 5px; margin-top: 10px; display: inline-block;}
        
        .game-map-container { display: flex; flex-direction: column; align-items: center; padding: 20px 0; }
        .map-node { width: 70px; height: 70px; border-radius: 50%; background: #bdc3c7; display: flex; align-items: center; justify-content: center; font-size: 30px; color: white; position: relative; margin-bottom: 40px; box-shadow: 0 5px 0 #95a5a6; z-index: 2; }
        .map-node.active { background: #f1c40f; box-shadow: 0 5px 0 #f39c12; animation: bounce 2s infinite; }
        .map-node.completed { background: var(--primary-color); box-shadow: 0 5px 0 var(--primary-dark); }
        .map-node.locked { background: #e0e0e0; color: #999; box-shadow: 0 5px 0 #ccc; }
        .map-node::after { content: ''; position: absolute; top: 75px; width: 4px; height: 40px; background: #ddd; z-index: 1; }
        .map-node:last-child::after { display: none; }
        .map-label { position: absolute; top: -25px; background: white; padding: 4px 8px; border-radius: 10px; font-size: 12px; font-weight: bold; color: #333; white-space: nowrap; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-10px);} 60% {transform: translateY(-5px);} }
        .modal-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; display: none; justify-content: center; align-items: center; }
        .modal-card { background: white; width: 80%; padding: 20px; border-radius: 20px; text-align: center; animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes popIn { from {transform: scale(0.5); opacity: 0;} to {transform: scale(1); opacity: 1;} }
        .chat-container { flex-grow: 1; overflow-y: auto; padding: 15px; background: #f0f2f5; display: flex; flex-direction: column; }
        .chat-bubble { max-width: 80%; padding: 12px; border-radius: 16px; margin-bottom: 12px; font-size: 14px; line-height: 1.4; position: relative; }
        .chat-bubble.bot { background: #fff; color: #333; border-bottom-left-radius: 4px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); align-self: flex-start; }
        .chat-bubble.user { background: #3498db; color: white; align-self: flex-end; border-bottom-right-radius: 4px; }
        .chat-bubble.agent { background: #f1c40f; color: #333; border-bottom-left-radius: 4px; align-self: flex-start; border: 1px solid #f39c12;}
        .chat-system-msg { text-align: center; font-size: 12px; color: #999; margin: 10px 0; }
        .chat-options { display: flex; gap: 10px; justify-content: center; margin-bottom: 10px; }
        .chat-option-btn { background: var(--accent-color); color: white; border: none; padding: 8px 15px; border-radius: 20px; font-size: 12px; cursor: pointer; }
        .nav-bar { position: absolute; bottom: 0; left: 0; right: 0; height: 70px; background: #fff; border-top: 1px solid #eee; display: flex; justify-content: space-around; align-items: center; padding-bottom: 10px; z-index: 20; }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: #95a5a6; cursor: pointer; font-size: 10px; }
        .nav-item.active { color: var(--primary-color); }
        .nav-item span { font-size: 22px; margin-bottom: 4px; }
        .settings-list .list-item { padding: 15px 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; font-size: 15px; cursor: pointer; }
        .list-item:last-child { border-bottom: none; }
        .list-action { color: var(--primary-color); font-size: 13px; }
        .risk-select-item { padding: 15px; border: 1px solid #eee; border-radius: 12px; margin-bottom: 10px; cursor: pointer; text-align: left; font-weight: 500; display: flex; align-items: center; }
        .risk-select-item:active { background: #f0f2f5; }
        .risk-select-item span { font-size: 20px; margin-right: 10px; }

    </style>
</head>
<body>

    <div class="phone-mockup">
        <div class="screen">

            <div id="page-home" class="page active">
                <div class="page-title" style="display: flex; justify-content: space-between; align-items: center;">
                    Cardif NEXT
                    <div style="display:flex; align-items:center; gap: 10px;">
                        <div style="font-size: 12px; background: #e8f8f5; color: var(--primary-color); padding: 4px 8px; border-radius: 12px;">æº–å®¢æˆ¶</div>
                        <div class="notification-bell" data-target="page-notifications">
                            <div class="bell-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                </svg>
                            </div>
                            <div class="notification-badge">N</div>
                        </div>
                    </div>
                </div>

                <div class="card wallet-card" data-target="page-wallet-detail">
                    <div class="wallet-header">
                        <div class="wallet-target">ç›®æ¨™: $3,000 / æœˆ</div>
                        <div style="font-size: 20px;">ğŸ¦</div>
                    </div>
                    <div class="wallet-amount">$ 3,000</div>
                    <div class="progress-bg">
                        <div class="progress-fill" style="width: 100%;"></div>
                    </div>
                    <div style="font-size: 12px; margin-top: 5px; opacity: 0.8;">è™›æ“¬éŒ¢åŒ…ç´¯ç©ä¸­ (å°šæœªæ‰£æ¬¾) ></div>
                </div>

                <div class="section-title">AI æ¶ˆè²»æ´å¯Ÿ</div>
                <div class="card insight-card" data-target="page-analysis" style="border-left: 5px solid var(--accent-color);">
                    <div style="font-size: 15px; margin-bottom: 8px;">
                        â˜• <strong>æœ¬æœˆã€Œæ‰‹æ–é£²ã€æ”¯å‡ºè­¦ç¤º</strong>
                    </div>
                    <p style="font-size: 13px; color: var(--text-sub); margin: 0 0 10px 0;">
                        æ‚¨æœ¬æœˆå·²ç´¯ç© <span style="color:var(--accent-color); font-weight:bold;">$3,000</span> é›¶éŒ¢ã€‚
                    </p>
                    <div style="background: #fdf0e6; padding: 10px; border-radius: 8px; font-size: 12px; color: #d35400;">
                        ğŸ’¡ <strong>AI å»ºè­°ï¼š</strong> é€™äº›éŒ¢å…¶å¯¦å¯ä»¥åšæ›´å¤šäº‹ï¼é»æ“Šä¸Šæ–¹éŒ¢åŒ…æŸ¥çœ‹ã€‚
                    </div>
                </div>

                <div class="section-title" style="margin-top:20px;">
                    <div>ğŸ“ è¨˜å¸³å¿«æ‰‹</div>
                    <div style="font-size:20px; color:var(--primary-color); cursor:pointer;">+</div>
                </div>
                <div class="card" style="padding: 10px 20px;">
                    <div class="transaction-item">
                        <div style="display:flex; align-items:center;">
                            <div class="t-icon">ğŸœ</div>
                            <div class="t-info">
                                <div class="t-name">Sukiya ç‰›ä¸¼</div>
                                <div class="t-date">10/29 æ™šé¤</div>
                            </div>
                        </div>
                        <div class="t-amount expense">-$ 139</div>
                    </div>
                    <div class="transaction-item">
                        <div style="display:flex; align-items:center;">
                            <div class="t-icon">ğŸ¥¤</div>
                            <div class="t-info">
                                <div class="t-name">50åµ</div>
                                <div class="t-date">10/29 é£²æ–™</div>
                            </div>
                        </div>
                        <div class="t-amount expense">-$ 55</div>
                    </div>
                    <div class="transaction-item">
                        <div style="display:flex; align-items:center;">
                            <div class="t-icon">ğŸš‡</div>
                            <div class="t-info">
                                <div class="t-name">æ·é‹åŠ å€¼</div>
                                <div class="t-date">10/28 äº¤é€š</div>
                            </div>
                        </div>
                        <div class="t-amount expense">-$ 300</div>
                    </div>
                    <div style="text-align:center; padding-top:10px; font-size:12px; color:#999; cursor:pointer;">æŸ¥çœ‹æ›´å¤šç´€éŒ„ v</div>
                </div>

                <div class="card" style="background: linear-gradient(90deg, #2c3e50, #4ca1af); color: white; cursor: pointer;" data-target="page-pass">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: bold; font-size: 16px;">Cardif Pass é€šé—œç¢¼</div>
                            <div style="font-size: 12px; opacity: 0.8;">å‰å¾€åˆ†è¡Œä¸€éµé–‹æˆ¶</div>
                        </div>
                        <div style="font-size: 24px;">ğŸš€</div>
                    </div>
                </div>
            </div>

            <div id="page-notifications" class="page sub-page">
                <div class="back-button" data-target="page-home">&lsaquo;</div>
                <div class="sub-page-title">é€šçŸ¥ä¸­å¿ƒ</div>
                
                <div class="noti-section-title">ğŸ”’ å®‰å…¨æ€§é€šçŸ¥</div>
                <div class="noti-item">
                    <div class="noti-icon security">âš ï¸</div>
                    <div class="noti-content">
                        <div class="noti-title">ç™»å…¥æé†’</div>
                        <div class="noti-desc">æ‚¨çš„å¸³æˆ¶æ–¼ 2025-10-29 10:30 åœ¨æ–°è£ç½®ç™»å…¥ã€‚</div>
                        <div class="noti-time">2 å°æ™‚å‰</div>
                    </div>
                </div>

                <div class="noti-section-title">ğŸ“¢ æ´»å‹•æ¨å»£</div>
                
                <div class="noti-item" style="display:block;">
                    <div class="event-card-img">
                        Cardif NEXT Lab
                    </div>
                    <div class="noti-content">
                        <div class="noti-title">ç·šä¸‹æ´»å‹•ï¼šæœªä¾†è²¡å¯Œå¯¦é©—å®¤</div>
                        <div class="event-tags">
                            <span class="event-tag">#æ²‰æµ¸å¼é«”é©—</span>
                            <span class="event-tag">#é›¶æ¨éŠ·å ´åŸŸ</span>
                            <span class="event-tag">#ç¤¾ç¾¤æ‰“å¡</span>
                        </div>
                        <div class="noti-desc">
                            é«”é©—è¡ŒéŠ· x å“ç‰Œå¹´è¼•åŒ–ï¼æˆ‘å€‘ä¸è³£ä¿å–®ï¼ŒåªèŠå¤¢æƒ³ã€‚æä¾›ã€Œè²¡å¯Œé«”è³ªæª¢æ¸¬ã€èˆ‡å…è²»å’–å•¡ï¼Œå¿«ä¾†äº’å‹•éŠæˆ²å–ä»£åš´è‚…å•å·ï¼Œè®“æ³•å·´è®Šã€Œé…·ã€ï¼
                        </div>
                        <button class="general-btn" style="margin-top:10px;">ç«‹å³å ±å</button>
                        <div class="noti-time">å‰›å‰›</div>
                    </div>
                </div>

                <div class="noti-item">
                    <div class="noti-icon promo">ğŸ‰</div>
                    <div class="noti-content">
                        <div class="noti-title">ç·šä¸Šè¬›åº§ï¼šZä¸–ä»£æŠ•è³‡è¡“</div>
                        <div class="noti-desc">é‚€è«‹çŸ¥åç†è²¡ç¶²ç´…åˆ†äº«å¦‚ä½•ç”¨å°éŒ¢æ»¾å‡ºç¬¬ä¸€æ¡¶é‡‘ã€‚</div>
                        <div class="noti-time">æ˜¨å¤©</div>
                    </div>
                </div>
            </div>

            <div id="page-wallet-detail" class="page sub-page" style="background: linear-gradient(135deg, #00915a, #2c3e50); color: white; padding: 0;">
                <div class="back-button" data-target="page-home" style="color: white; top: 45px;">&lsaquo;</div>
                <div class="confetti-container" id="confetti-container"></div>
                
                <div style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding-bottom: 180px;">
                    
                    <div class="piggy-icon-container">
                        <div class="coin-drop">ğŸª™</div>
                        <svg width="150" height="150" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
                           <path d="M428.1 190.4C428.1 190.4 438 152.1 416.7 125.8C395.4 99.5 358.5 106.6 358.5 106.6C325.8 71.1 270.4 56.9 203.7 66.8C101.4 82.1 40.3 161.7 25 264C22.2 282.9 22.9 301.2 26.5 318.5L25.9 318.6C12.1 321.4 2.80005 334.8 5.60005 348.6L14.4 391.2C17.2 405 30.6 414.3 44.4 411.5L83.7 403.4C90.2 431.1 106.2 453.9 129.4 466.8L120.7 482.4C113.8 494.6 118 509.9 130.2 516.8C142.4 523.7 157.7 519.5 164.6 507.3L175.7 487.6C200.7 493.6 228 493.9 255.6 489.8C255.6 489.8 255.6 489.8 255.7 489.8C279.7 486.2 301.8 478.4 321.1 467.5L327.9 483.5C333.3 496.3 348.2 502.3 361 496.9C373.8 491.5 379.8 476.6 374.4 463.8L366.5 445.3C397.6 418.5 418.5 379.9 423.5 336.5C423.5 336.5 453.3 323.7 459 292.5C464.7 261.3 428.1 247.1 428.1 247.1C433.8 234.3 433.8 206 428.1 190.4ZM246.4 121.8C265.7 118.9 281.4 132.3 281.4 132.3C281.4 132.3 268 148 248.7 150.9C229.4 153.8 213.7 140.4 213.7 140.4C213.7 140.4 227.1 124.7 246.4 121.8Z" fill="#F4A261"/>
                           <path d="M250 145 L215 135" stroke="#E76F51" stroke-width="10" stroke-linecap="round"/>
                        </svg>
                    </div>

                    <h2 style="font-size: 24px; margin: 10px 0;">æœ¬æœˆè™›æ“¬ç´¯ç©</h2>
                    <div style="font-size: 48px; font-weight: 800; margin-bottom: 20px;">$ 3,000</div>
                    
                    <div style="width: 80%; text-align: center;">
                        <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 5px;">
                            <span>$0</span>
                            <span>$3,000</span>
                        </div>
                        <div style="background: rgba(255,255,255,0.3); height: 12px; border-radius: 6px; overflow: hidden;">
                            <div style="width: 100%; height: 100%; background: #f1c40f; border-radius: 6px; box-shadow: 0 0 10px #f1c40f;"></div>
                        </div>
                        <div style="margin-top: 15px; font-size: 13px; opacity: 0.9; line-height: 1.6;">
                            å¤ªæ£’äº†ï¼æ‚¨é€éè¨˜å¸³å·²ã€Œè™›æ“¬ã€å­˜ä¸‹äº†é€™ç­†éŒ¢ã€‚<br>ç¾åœ¨ï¼Œè®“å®ƒè®ŠæˆçœŸçš„è²¡å¯Œå§ï¼âœ¨
                        </div>
                    </div>
                </div>

                <div class="bottom-sheet">
                    <div style="text-align: center;">
                        <div style="font-size: 24px; margin-bottom: 10px;">ğŸ‰ æ­å–œé”æ¨™ï¼</div>
                        <p style="color: #666; font-size: 14px; margin-bottom: 25px; line-height: 1.5;">
                            æ˜¯å¦æˆæ¬Šå°‡ <strong style="color: var(--primary-color);">$3,000</strong> è½‰å…¥æ³•å·´æŠ•è³‡å¸³æˆ¶ï¼Ÿ<br>
                            è®“é€™ç­†éŒ¢é–‹å§‹ç‚ºæ‚¨çš„å¤¢æƒ³å·¥ä½œï¼
                        </p>
                        <button class="btn-primary" onclick="showProcessModal()" style="box-shadow: 0 10px 20px rgba(0, 145, 90, 0.3);">
                            ç¢ºèªæˆæ¬Šï¼Œç¹¼çºŒä¸‹ä¸€æ­¥
                        </button>
                        <div style="margin-top: 15px; font-size: 12px; color: #999; text-decoration: underline; cursor: pointer;" data-target="page-home">
                            ç¨å¾Œå†èªª
                        </div>
                    </div>
                </div>
            </div>

            <div id="process-modal" class="process-modal">
                <div class="process-card">
                    <h3 style="text-align: center; margin-bottom: 20px; color: var(--text-main);">è³‡é‡‘èª¿åº¦åŸ·è¡Œä¸­</h3>
                    
                    <div class="step-item" id="step-1">
                        <div class="step-icon">ğŸ”—</div>
                        <div>
                            <div class="step-text">é€£ç·šéŠ€è¡Œå¸³æˆ¶</div>
                            <div class="step-desc">å®‰å…¨é©—è­‰é€šé“å»ºç«‹...</div>
                        </div>
                    </div>

                    <div class="step-item" id="step-2">
                        <div class="step-icon">ğŸ’¸</div>
                        <div>
                            <div class="step-text">åŸ·è¡Œ ACH æ‰£æ¬¾</div>
                            <div class="step-desc">è½‰å‡ºé‡‘é¡ $3,000</div>
                        </div>
                    </div>

                    <div class="step-item" id="step-3">
                        <div class="step-icon">ğŸ“ˆ</div>
                        <div>
                            <div class="step-text">ç”³è³¼åŸºé‡‘çµ„åˆ</div>
                            <div class="step-desc">è²·å…¥ï¼šç©©å¥æˆé•·è™Ÿ</div>
                        </div>
                    </div>

                    <div class="step-item" id="step-4">
                        <div class="step-icon">ğŸ›¡ï¸</div>
                        <div>
                            <div class="step-text">å•Ÿå‹•é˜²è­·ç¶²</div>
                            <div class="step-desc">æ›´æ–°æŠ•è³‡å‹ä¿å–®ä¿éšœé¡åº¦</div>
                        </div>
                    </div>

                    <button id="process-done-btn" class="btn-primary" style="display: none; margin-top: 20px;" data-target="page-invest" onclick="closeProcessModal()">
                        å®Œæˆï¼æŸ¥çœ‹æŠ•è³‡å¸³æˆ¶
                    </button>
                </div>
            </div>

            <div id="page-analysis" class="page">
                <div class="page-title">æ¶ˆè²»èˆ‡ä¿éšœåˆ†æ</div>
                
                <div class="card">
                    <div class="section-title">ğŸ›¡ï¸ å¤¢æƒ³é˜²è­·ç¶² (Gap Analysis)</div>
                    <p style="font-size: 13px; color: #666;">ç›®æ¨™ï¼šå‡ºåœ‹ç•™å­¸åŸºé‡‘ (100è¬)</p>
                    <div class="shield-stack-container">
                        <div class="stack-bar-savings">å·²å­˜ 20è¬</div>
                        <div class="stack-bar-insurance">ä¿éšªç†è³ è£œä½ 80è¬</div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 10px;">
                        <span style="color: #3498db;">â— ç›®å‰è³‡ç”¢</span>
                        <span style="color: #d35400;">â— å£½éšªé˜²è­·</span>
                    </div>
                    <div style="background: #e8f8f5; border: 1px solid var(--primary-color); padding: 12px; border-radius: 8px; font-size: 13px; color: var(--primary-dark);">
                        ğŸ¤– <strong>AI æç¤ºå¡ï¼š</strong><br>
                        å®‰å¿ƒå°èˆªä¸­ã€‚è‹¥ç™¼ç”Ÿé¢¨éšªï¼Œå°‡å•Ÿå‹• <strong style="color: #d35400;">$80 è¬</strong> å£½éšªç†è³ ï¼Œç¢ºä¿ã€Œå‡ºåœ‹ç•™å­¸åŸºé‡‘ã€ç›®æ¨™é”æˆã€‚
                    </div>
                </div>

                <div class="card">
                    <div class="section-title">æœ¬æœˆæ”¯å‡ºçµæ§‹</div>
                    <div class="chart-container" style="height: 180px;">
                        <canvas id="expenseChart"></canvas>
                    </div>
                </div>
            </div>

            <div id="page-invest" class="page">
                <div class="page-title">æŠ•è³‡çµ„åˆ</div>

                <div class="identity-card" id="identity-card">
                    <div class="identity-content">
                        <div class="identity-label">ä½ æ˜¯</div>
                        <div class="identity-value" id="identity-text">ç©©å¥å‹æŠ•è³‡äºº (Balanced)</div>
                    </div>
                    <div class="identity-watermark" id="identity-icon">âš–ï¸</div>
                </div>

                <div class="card">
                    <div class="section-title">æ­·å²æ¨¡æ“¬ç¸¾æ•ˆ</div>
                    <div class="chart-container" style="height: 200px;">
                         <canvas id="fundChart"></canvas>
                    </div>
                </div>

                <div class="card">
                    <div class="section-title">è³‡ç”¢é…ç½®åˆ†ä½ˆ</div>
                    <div style="display: flex; align-items: center;">
                        <div style="width: 50%; position: relative; height: 120px;">
                             <canvas id="allocationChart"></canvas>
                        </div>
                        <div class="allocation-legend" id="allocation-legend" style="width: 50%; padding-left: 15px;">
                            </div>
                    </div>
                </div>

                <div class="card" style="display: flex; align-items: center; justify-content: space-between;">
                    <div style="display: flex; align-items: center;">
                        <div style="width: 40px; height: 40px; background: #f0f2f5; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                            ğŸ¦
                        </div>
                        <div>
                            <div style="font-weight: bold; font-size: 14px;">é€£çµéŠ€è¡Œå¸³æˆ¶</div>
                            <div style="font-size: 12px; color: #999;">ç”¨æ–¼å®šæœŸå®šé¡æ‰£æ¬¾</div>
                        </div>
                    </div>
                    <button class="btn-small" style="border: 1px solid var(--primary-color); color: var(--primary-color);" onclick="alert('æ¨¡æ“¬åŠŸèƒ½ï¼šå°‡è·³è½‰è‡³ç¶²éŠ€æˆæ¬Šé é¢')">é€£çµ</button>
                </div>

                <div style="text-align: center; color: #999; font-size: 10px; margin-top: 20px; padding-bottom: 20px;">
                    * æŠ•è³‡ä¸€å®šæœ‰é¢¨éšªï¼Œéå»ç¸¾æ•ˆä¸ä»£è¡¨æœªä¾†ç²åˆ©ã€‚
                </div>
            </div>

            <div id="page-rewards" class="page">
                <div class="page-title">è²¡å•†ä»»å‹™ & çå‹µ</div>

                <div class="level-dashboard">
                    <div class="level-header">
                        <div style="display:flex; align-items:center;">
                            <div class="level-avatar">ğŸ‘¶</div>
                            <div class="level-info">
                                <div class="level-title">Lv.1 æ–°æ‰‹æ‘</div>
                                <div class="level-coin">ğŸ’° 500 XP</div>
                            </div>
                        </div>
                        <div class="level-coin" style="font-size: 18px;">ğŸ’ 500</div>
                    </div>
                    
                    <div class="xp-container">
                        <div class="xp-text">
                            <span>EXP: 500 / 1000</span>
                            <span>50%</span>
                        </div>
                        <div class="xp-bar-bg">
                            <div class="xp-bar-fill"></div>
                        </div>
                        <div class="xp-condition">è· Lv.2 å„²è“„ä¹‹æ£® é‚„å·® 500 XP</div>
                    </div>

                    <div class="mini-map">
                        <div class="map-point active"><span>æ–°æ‰‹æ‘</span>â˜…</div>
                        <div class="map-point locked"><span>å„²è“„ä¹‹æ£®</span>ğŸ”’</div>
                        <div class="map-point locked"><span>æŠ•è³‡è°·</span>ğŸ”’</div>
                        <div class="map-point locked"><span>è²¡å¯ŒåŸ</span>ğŸ”’</div>
                    </div>
                </div>

                <div class="card" style="padding: 0; overflow: hidden;">
                    <div class="mission-tabs">
                        <button class="mission-tab-btn active" onclick="switchMissionTab('daily', this)">ğŸ“… æ¯æ—¥</button>
                        <button class="mission-tab-btn" onclick="switchMissionTab('weekly', this)">ğŸ—“ï¸ æ¯é€±</button>
                        <button class="mission-tab-btn" onclick="switchMissionTab('collection', this)">ğŸ† åœ–é‘‘</button>
                    </div>

                    <div id="panel-daily" class="mission-panel active" style="padding: 0 15px 15px 15px;">
                        <div class="quest-item">
                            <div style="display:flex; align-items:center;">
                                <div class="quest-icon">ğŸ“°</div>
                                <div class="quest-info">
                                    <h4>é–±è®€è²¡ç¶“å¿«è¨Š</h4>
                                    <p>+50 XP & å¹£</p>
                                </div>
                            </div>
                            <button class="quest-action-btn" data-target="page-news">Go</button>
                        </div>
                        <div class="quest-item">
                            <div style="display:flex; align-items:center;">
                                <div class="quest-icon">ğŸ“</div>
                                <div class="quest-info">
                                    <h4>å¡«å¯«é¢¨éšªå•å·</h4>
                                    <p>+100 XP & å¹£</p>
                                </div>
                            </div>
                            <button class="quest-action-btn disabled">å®Œæˆ</button>
                        </div>
                    </div>

                    <div id="panel-weekly" class="mission-panel" style="padding: 0 15px 15px 15px;">
                        <div class="quest-item">
                            <div style="display:flex; align-items:center;">
                                <div class="quest-icon">ğŸ“’</div>
                                <div class="quest-info">
                                    <h4>è¨˜å¸³é”äºº (0/3)</h4>
                                    <p>é€£çºŒè¨˜å¸³ 3 å¤© (+150 XP)</p>
                                </div>
                            </div>
                            <button class="quest-action-btn disabled">0/3</button>
                        </div>
                        <div class="quest-item">
                            <div style="display:flex; align-items:center;">
                                <div class="quest-icon">ğŸ’°</div>
                                <div class="quest-info">
                                    <h4>å­˜éŒ¢æŒ‘æˆ°</h4>
                                    <p>ç´¯ç©è™›æ“¬å„²è“„ $500 (+200 XP)</p>
                                </div>
                            </div>
                            <button class="quest-action-btn" data-target="page-home">Go</button>
                        </div>
                    </div>

                    <div id="panel-collection" class="mission-panel" style="padding: 0 15px 15px 15px;">
                        <div class="badge-grid">
                            <div class="badge-item unlocked">
                                <div class="badge-icon">ğŸ‘¶</div>
                                <div class="badge-name">åˆå‡ºèŒ…å»¬</div>
                                <div class="badge-desc">å®Œæˆè¨»å†Š</div>
                            </div>
                            <div class="badge-item">
                                <div class="badge-icon">ğŸ›¡ï¸</div>
                                <div class="badge-name">æ³•å·´å®ˆè­·è€…</div>
                                <div class="badge-desc">æŒæœ‰ä»»ä¸€ä¿å–®</div>
                            </div>
                            <div class="badge-item">
                                <div class="badge-icon">ğŸ“ˆ</div>
                                <div class="badge-name">ç©©å¥èˆµæ‰‹</div>
                                <div class="badge-desc">æŠ•è³‡å ±é…¬ > 5%</div>
                            </div>
                            <div class="badge-item">
                                <div class="badge-icon">ğŸ“</div>
                                <div class="badge-name">è²¡å•†å­¸å¾’</div>
                                <div class="badge-desc">é–±è®€ 10 ç¯‡æ–‡ç« </div>
                            </div>
                            <div class="badge-item">
                                <div class="badge-icon">ğŸ’</div>
                                <div class="badge-name">ç¬¬ä¸€æ¡¶é‡‘</div>
                                <div class="badge-desc">è³‡ç”¢é” 10 è¬</div>
                            </div>
                            <div class="badge-item">
                                <div class="badge-icon">ğŸ¤</div>
                                <div class="badge-name">ä¿¡è³´å¤¥ä¼´</div>
                                <div class="badge-desc">é€£çºŒä½¿ç”¨ 30 å¤©</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="vip-zone">
                    <div class="vip-header">
                        <div class="vip-title">ğŸ† VIP å°Šçˆµå°ˆå€</div>
                        <div class="vip-condition">âš ï¸ è§£é–æ¢ä»¶ï¼šæŒæœ‰ Cardif ä¿å–®</div>
                    </div>
                    <div class="vip-grid">
                        <div class="vip-item">
                            <div class="vip-lock-overlay"><div class="lock-icon">ğŸ”’</div><div class="lock-text">VIP Only</div></div>
                            <div style="font-size: 24px;">ğŸ¥©</div><div style="font-size: 12px; font-weight: bold;">è¥¿å ¤ç‰›æ’</div><div style="font-size: 10px; opacity: 0.8;">7000 å¹£</div>
                        </div>
                        <div class="vip-item">
                            <div class="vip-lock-overlay"><div class="lock-icon">ğŸ”’</div><div class="lock-text">VIP Only</div></div>
                            <div style="font-size: 24px;">ğŸ“º</div><div style="font-size: 12px; font-weight: bold;">Netflix</div><div style="font-size: 10px; opacity: 0.8;">2700 å¹£</div>
                        </div>
                        <div class="vip-item">
                            <div class="vip-lock-overlay"><div class="lock-icon">ğŸ”’</div><div class="lock-text">VIP Only</div></div>
                            <div style="font-size: 24px;">ğŸµ</div><div style="font-size: 12px; font-weight: bold;">Spotify</div><div style="font-size: 10px; opacity: 0.8;">2500 å¹£</div>
                        </div>
                        <div class="vip-item">
                            <div class="vip-lock-overlay"><div class="lock-icon">ğŸ”’</div><div class="lock-text">VIP Only</div></div>
                            <div style="font-size: 24px;">ğŸ•</div><div style="font-size: 12px; font-weight: bold;">å¿…å‹å®¢</div><div style="font-size: 10px; opacity: 0.8;">1000 å¹£</div>
                        </div>
                        <div class="vip-item">
                            <div class="vip-lock-overlay"><div class="lock-icon">ğŸ”’</div><div class="lock-text">VIP Only</div></div>
                            <div style="font-size: 24px;">ğŸ½ï¸</div><div style="font-size: 12px; font-weight: bold;">ç‹å“ $500</div><div style="font-size: 10px; opacity: 0.8;">5000 å¹£</div>
                        </div>
                        <div class="vip-item">
                            <div class="vip-lock-overlay"><div class="lock-icon">ğŸ”’</div><div class="lock-text">VIP Only</div></div>
                            <div style="font-size: 24px;">ğŸ—</div><div style="font-size: 12px; font-weight: bold;">KFC è›‹å¡”</div><div style="font-size: 10px; opacity: 0.8;">2000 å¹£</div>
                        </div>
                        <div class="vip-item">
                            <div class="vip-lock-overlay"><div class="lock-icon">ğŸ”’</div><div class="lock-text">VIP Only</div></div>
                            <div style="font-size: 24px;">ğŸ“š</div><div style="font-size: 12px; font-weight: bold;">èª å“ $250</div><div style="font-size: 10px; opacity: 0.8;">2500 å¹£</div>
                        </div>
                        <div class="vip-item">
                            <div class="vip-lock-overlay"><div class="lock-icon">ğŸ”’</div><div class="lock-text">VIP Only</div></div>
                            <div style="font-size: 24px;">ğŸ</div><div style="font-size: 12px; font-weight: bold;">æ–°æ±é™½</div><div style="font-size: 10px; opacity: 0.8;">3500 å¹£</div>
                        </div>
                    </div>
                </div>

                <div class="general-zone">
                    <div class="general-title">âœ¨ ä¸€èˆ¬å°ˆå€ (ç«‹å³å…Œæ›)</div>
                    <div class="general-grid">
                        <div class="general-item">
                            <div style="font-size: 28px;">ğŸ¥š</div><div style="font-size: 13px; font-weight: bold; margin-top:5px;">èŒ¶è‘‰è›‹</div><div style="font-size: 11px; color:#666;">130 å¹£</div>
                            <button class="general-btn">ç«‹å³å…Œæ›</button>
                        </div>
                        <div class="general-item">
                            <div style="font-size: 28px;">ğŸŸ</div><div style="font-size: 13px; font-weight: bold; margin-top:5px;">å°è–¯</div><div style="font-size: 11px; color:#666;">350 å¹£</div>
                            <button class="general-btn">ç«‹å³å…Œæ›</button>
                        </div>
                        <div class="general-item">
                            <div style="font-size: 28px;">ğŸª</div><div style="font-size: 13px; font-weight: bold; margin-top:5px;">7-11 $50</div><div style="font-size: 11px; color:#666;">500 å¹£</div>
                            <button class="general-btn">ç«‹å³å…Œæ›</button>
                        </div>
                        <div class="general-item">
                            <div style="font-size: 28px;">ğŸ©</div><div style="font-size: 13px; font-weight: bold; margin-top:5px;">Mister Donut</div><div style="font-size: 11px; color:#666;">500 å¹£</div>
                            <button class="general-btn">ç«‹å³å…Œæ›</button>
                        </div>
                        <div class="general-item">
                            <div style="font-size: 28px;">ğŸ£</div><div style="font-size: 13px; font-weight: bold; margin-top:5px;">çˆ­é®® $90</div><div style="font-size: 11px; color:#666;">900 å¹£</div>
                            <button class="general-btn">ç«‹å³å…Œæ›</button>
                        </div>
                    </div>
                </div>

                <button class="btn-view-more" onclick="alert('æ›´å¤šç²¾é¸å¥½ç¦®æº–å‚™ä¸­ï¼Œæ•¬è«‹æœŸå¾…ï¼')">æŸ¥çœ‹æ›´å¤šçå‹µ v</button>
            </div>

            <div id="page-game-map" class="page sub-page" style="background: linear-gradient(180deg, #87CEEB 0%, #ffffff 100%);">
                <div class="back-button" data-target="page-rewards">&lsaquo;</div>
                <div class="sub-page-title">æˆ‘çš„æˆé•·åœ°åœ–</div>
                
                <div class="game-map-container">
                    <div class="map-node completed">
                        <div class="map-label">Lv.0</div>
                        ğŸ‘¶
                    </div>
                    <div class="map-node active" style="transform: translateX(-20px);">
                        <div class="map-label">Lv.1 æ–°æ‰‹æ‘</div>
                        ğŸ¡
                    </div>
                    <div class="map-node locked" style="transform: translateX(20px);">
                        <div class="map-label">Lv.2 å„²è“„ä¹‹æ£®</div>
                        ğŸŒ²
                    </div>
                    <div class="map-node locked" style="transform: translateX(-10px);">
                        <div class="map-label">Lv.3 æŠ•è³‡å³½è°·</div>
                        â›°ï¸
                    </div>
                    <div class="map-node locked" style="width: 90px; height: 90px; border: 4px solid #95a5a6;">
                        <div class="map-label">Lv.10 è²¡å¯ŒåŸå ¡</div>
                        ğŸ°
                    </div>
                </div>
            </div>

            <div id="page-settings" class="page">
                <div class="page-title">è¨­å®š</div>

                <div class="card">
                    <div class="section-title">ğŸ‘¤ å€‹äººè³‡æ–™</div>
                    <div class="settings-list">
                        <div class="list-item">
                            <span>å§“å</span>
                            <span style="color:#7f8c8d;">ç‹å¤§æ˜</span>
                        </div>
                         <div class="list-item" onclick="openRiskSettings()">
                            <span>æŠ•è³‡åå¥½</span>
                            <span class="list-action" id="settings-risk-label">ç©©å¥å‹ ></span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="section-title">å¸³æˆ¶ç¶å®š</div>
                    <div class="settings-list">
                        <div class="list-item">
                            <span>â˜ï¸ è²¡æ”¿éƒ¨é›»å­ç™¼ç¥¨ (å·²ç¶å®š)</span>
                            <button class="btn-small">è¨­å®š</button>
                        </div>
                        <div class="list-item">
                            <span>ğŸ¦ éŠ€è¡Œäº¤å‰²å¸³æˆ¶ (æœªè¨­å®š)</span>
                            <button class="btn-small" style="color:var(--primary-color); border-color:var(--primary-color);">è¨­å®š</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="section-title">æ”¯æ´èˆ‡é—œæ–¼</div>
                    <div class="settings-list">
                        <div class="list-item" data-target="page-chatbot">
                            <span>ğŸ¤– AI åŠ©ç†è¨­å®š (å° C)</span>
                            <span class="list-action">></span>
                        </div>
                        <div class="list-item">
                            <span>ğŸ‘©â€ğŸ’¼ è½‰æ¥çœŸäººå®¢æœ</span>
                            <span class="list-action">></span>
                        </div>
                        <div class="list-item">
                            <span>ğŸ”’ éš±ç§æ¬Šæ¢æ¬¾</span>
                            <span class="list-action">></span>
                        </div>
                         <div class="list-item" style="justify-content: center; border: none; margin-top: 10px;">
                            <span style="color: red; font-weight: bold;">ç™»å‡º</span>
                        </div>
                    </div>
                </div>
            </div>

            <div id="page-news" class="page sub-page">
                 <div class="back-button" data-target="page-rewards">&lsaquo;</div>
                 <div class="sub-page-title">è²¡ç¶“å¿«è¨Š</div>
                 <div style="padding: 0 10px;">
                     <h2 style="font-size: 22px; margin-bottom: 10px;">é€šè†¨æ˜¯ä»€éº¼ï¼Ÿç‚ºä»€éº¼éŒ¢æœƒè®Šè–„ï¼Ÿ</h2>
                     <div style="color: #999; font-size: 12px; margin-bottom: 20px;">2025-10-29 | Cardif ç·¨è¼¯éƒ¨</div>
                     <div style="width: 100%; height: 150px; background: #ddd; margin-bottom: 20px; border-radius: 8px; display:flex; align-items:center; justify-content:center; color:#777;">æ–‡ç« é…åœ–å€</div>
                     <p style="line-height: 1.6; color: #333;">
                         é€šè²¨è†¨è„¹ï¼ˆInflationï¼‰æ˜¯æŒ‡ç‰©åƒ¹æ°´æº–åœ¨ä¸€æ®µæ™‚é–“å…§æŒçºŒä¸Šæ¼²ï¼Œå°è‡´è²¨å¹£è³¼è²·åŠ›ä¸‹é™çš„ç¶“æ¿Ÿç¾è±¡ã€‚
                         <br><br>
                         ç°¡å–®ä¾†èªªï¼Œä»Šå¤©çš„ 100 å…ƒï¼Œæ˜å¹´å¯èƒ½åªèƒ½è²·åˆ° 95 å…ƒåƒ¹å€¼çš„æ±è¥¿ã€‚å°æŠ—é€šè†¨æœ€å¥½çš„æ–¹å¼ï¼Œå°±æ˜¯é€éé©ç•¶çš„æŠ•è³‡ç†è²¡ï¼Œè®“è³‡ç”¢å¢å€¼çš„é€Ÿåº¦è¶…éé€šè†¨ç‡ã€‚
                     </p>
                     <button class="btn-primary" style="margin-top: 30px;" onclick="showQuizResult()">ğŸ“ é–‹å§‹å°æ¸¬é©— (3é¡Œ)</button>
                 </div>
            </div>

            <div id="page-pass" class="page sub-page">
                <div class="back-button" data-target="page-home">&lsaquo;</div>
                <div class="sub-page-title">Cardif Pass æ•¸ä½é€šé—œ</div>
                
                <div class="pass-card">
                    <div style="background: #e8f8f5; color: var(--primary-color); padding: 4px 12px; border-radius: 12px; font-size: 12px; display:inline-block; margin-bottom:10px;">è³‡æ–™å·²åŠ å¯†æ‰“åŒ…</div>
                    <h3 style="margin: 10px 0;">ç‹å¤§æ˜ (æº–å®¢æˆ¶)</h3>
                    <div style="font-size: 13px; color: #7f8c8d;">KYC: ç©©å¥å‹ | é é¸: ç©©å¥æˆé•·è™Ÿ</div>
                    
                    <div id="qrcode"></div>
                    <div class="pass-serial">SN: CDF-2025-8899</div>
                    
                    <p style="font-size: 12px; color: #7f8c8d; line-height: 1.5; margin-top: 20px;">
                        è«‹è‡³æ³•å·´åˆä½œéŠ€è¡Œè‡¨æ«ƒå‡ºç¤ºæ­¤ç¢¼ã€‚<br>
                        ç†å°ˆæƒæå¾Œå°‡è‡ªå‹•å¸¶å…¥æ‚¨çš„è³‡æ–™ï¼Œ<br>
                        <strong>å…å¡«å–®ï¼Œå¿«é€Ÿæˆäº¤ï¼</strong>
                    </p>
                </div>
            </div>

            <div id="page-chatbot" class="page sub-page" style="display: flex; flex-direction: column; background: #f0f2f5; padding: 0;">
                 <div style="background: white; padding: 45px 20px 10px 20px; border-bottom: 1px solid #ddd; display: flex; align-items: center;">
                     <div class="back-button" data-target="page-home" style="position: static; margin-right: 15px;">&lsaquo;</div>
                     <div style="font-weight: bold; font-size: 16px;">Cardif æ™ºèƒ½åŠ©ç† å°C</div>
                 </div>
                 
                 <div class="chat-container">
                     <div class="chat-bubble bot">
                         <div style="font-weight: bold; margin-bottom: 5px;">ğŸ¤– å° C</div>
                         æ‚¨å¥½ ~ æˆ‘æ˜¯ Cardif æ™ºèƒ½åŠ©ç† å°Cï¼<br>
                         æƒ³æŸ¥è©¢ã€å¸³æˆ¶é¤˜é¡ã€é‚„æ˜¯ã€æŠ•è³‡é€²åº¦ã€å‘¢ï¼Ÿ
                     </div>
                     <div class="chat-bubble user">
                        æˆ‘æƒ³äº†è§£æˆ‘çš„æŠ•è³‡å‹ä¿å–®ç¸¾æ•ˆ
                     </div>
                     <div class="chat-bubble bot">
                         <div style="font-weight: bold; margin-bottom: 5px;">ğŸ¤– å° C</div>
                         æ‚¨çš„æŠ•è³‡å‹ä¿å–®ç¸¾æ•ˆç‚º.... (+5.2%)
                     </div>
                     <div class="chat-bubble user">
                        æœ€è¿‘æ‰‹é ­æœ‰é»ç·Š... æˆ‘æ˜¯ä¸æ˜¯è©²æŠŠæŠ•è³‡åœæ‰ï¼ŸğŸ˜”
                     </div>
                     <div class="chat-system-msg">âš ï¸ å°Cæ­£åœ¨åˆ†æä¸­...è«‹ç¨å€™</div>
                     <div class="chat-bubble bot">
                         <div style="font-weight: bold; margin-bottom: 5px;">ğŸ¤– å° C</div>
                         è‹¥ç¾åœ¨è§£ç´„ï¼Œæ‚¨å°‡<strong>æå¤±ç´¯ç©çš„è¤‡åˆ©æ•ˆç›Š</strong>ï¼Œä¸”å£½éšªä¿éšœå°‡ç«‹å³çµ‚æ­¢ã€‚
                     </div>
                     <div class="chat-system-msg">âš ï¸ åµæ¸¬åˆ°ç”¨æˆ¶æœ‰ã€è§£ç´„ã€æˆ–ã€èª¿æ•´é…ç½®ã€æ„åœ–ï¼Œæ­£åœ¨è½‰æ¥å°ˆäººæœå‹™...</div>
                     <div class="chat-options">
                         <button class="chat-option-btn" style="background: orange;">ç«‹å³è½‰æ¥<br>çœŸäººèªéŸ³å®¢æœ</button>
                         <button class="chat-option-btn" style="background: orange;">ç«‹å³è½‰æ¥<br>çœŸäººæ–‡å­—å®¢æœ</button>
                     </div>
                     <div class="chat-system-msg">æ­£åœ¨ç‚ºæ‚¨è½‰æ¥æ–‡å­—çœŸäººå®¢æœ...</div>
                     <div class="chat-bubble agent">
                         <div style="font-weight: bold; margin-bottom: 5px;">ğŸ‘©â€ğŸ’¼ ç†è²¡é¡§å• Lisa</div>
                         ç‹å…ˆç”Ÿæ‚¨å¥½ï¼Œæˆ‘æ˜¯ç†è²¡é¡§å• Lisaã€‚çœ‹åˆ°æ‚¨æƒ³èª¿æ•´é…ç½®ï¼Œæ ¹æ“šæ‚¨çš„é¢¨éšªå±¬æ€§ï¼Œæˆ‘å»ºè­°...
                     </div>
                 </div>

                 <div class="chat-input-bar" style="height: 60px; background: #fff; display: flex; align-items: center; padding: 0 15px; border-top: 1px solid #eee;">
                     <input type="text" placeholder="è¼¸å…¥è¨Šæ¯..." style="flex: 1; border: none; outline: none; font-size: 14px;">
                     <button style="background: none; border: none; font-size: 20px; color: var(--primary-color);">â¤</button>
                 </div>
            </div>

            <div id="quiz-modal" class="modal-overlay">
                <div class="modal-card">
                    <div style="font-size: 50px; margin-bottom: 10px;">ğŸ‰</div>
                    <h3 style="margin-bottom: 10px; color: var(--primary-color);">ä»»å‹™å®Œæˆï¼</h3>
                    <p>æ­å–œæ‚¨é€šéæ¸¬é©—<br>å·²ç²å¾— <strong>50 Cardif å¹£</strong></p>
                    <button class="btn-primary" onclick="closeQuizModal()">å¤ªæ£’äº† (è¿”å›)</button>
                </div>
            </div>

            <div id="risk-setting-modal" class="modal-overlay">
                <div class="modal-card" style="text-align: left;">
                    <h3 style="margin-bottom: 15px; text-align: center;">é¸æ“‡æŠ•è³‡å±¬æ€§</h3>
                    <div class="risk-selection-list">
                        <div class="risk-select-item" onclick="setRiskAndClose('conservative')">
                            <span>ğŸ¢</span> ä¿å®ˆå‹
                        </div>
                        <div class="risk-select-item" onclick="setRiskAndClose('steady')">
                            <span>âš–ï¸</span> ç©©å¥å‹
                        </div>
                        <div class="risk-select-item" onclick="setRiskAndClose('aggressive')">
                            <span>ğŸš€</span> ç©æ¥µå‹
                        </div>
                    </div>
                    <button class="btn-primary" onclick="closeRiskSettings()" style="background: #ccc; margin-top: 10px;">å–æ¶ˆ</button>
                </div>
            </div>

            <div class="nav-bar">
                <div class="nav-item active" data-page="page-home">
                    <span>ğŸ </span><div>é¦–é </div>
                </div>
                <div class="nav-item" data-page="page-analysis">
                    <span>ğŸ“Š</span><div>åˆ†æ</div>
                </div>
                <div class="nav-item" data-page="page-invest">
                    <span>ğŸ“ˆ</span><div>æŠ•è³‡</div>
                </div>
                <div class="nav-item" data-page="page-rewards">
                    <span>ğŸ</span><div>ä»»å‹™</div>
                </div>
                <div class="nav-item" data-page="page-settings">
                    <span>âš™ï¸</span><div>è¨­å®š</div>
                </div>
            </div>
            
            <div style="position: absolute; bottom: 85px; right: 20px; width: 50px; height: 50px; background: var(--primary-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); cursor: pointer; z-index: 50;" data-target="page-chatbot">ğŸ¤–</div>

        </div>
    </div>

    <script>
        // å…¨å±€è®Šæ•¸å„²å­˜ç•¶å‰é¢¨éšª
        let currentGlobalRisk = 'steady';

        document.addEventListener('DOMContentLoaded', function() {
            // --- å°èˆªé‚è¼¯ ---
            const pages = document.querySelectorAll('.page');
            const navItems = document.querySelectorAll('.nav-item');
            
            window.navigateTo = function(pageId) {
                pages.forEach(p => {
                    p.classList.remove('active');
                    p.style.display = 'none'; 
                });
                
                const target = document.getElementById(pageId);
                if(target) {
                    if (target.classList.contains('fullscreen-page') || pageId === 'page-chatbot') {
                         target.style.display = 'flex';
                    } else if (pageId === 'page-wallet-detail') {
                         target.style.display = 'flex'; 
                         startConfetti();
                    } else {
                        target.style.display = 'block';
                    }
                    void target.offsetWidth; 
                    target.classList.add('active');
                    
                    if(pageId === 'page-pass') generateQRCode();
                    if(pageId === 'page-analysis') drawExpenseChart();
                    if(pageId === 'page-invest') {
                        // æ¯æ¬¡é€²æŠ•è³‡é éƒ½é‡æ–°æ¸²æŸ“ç•¶å‰çš„é¢¨éšªç‹€æ…‹
                        updateInvestPageUI(currentGlobalRisk);
                    }
                }

                navItems.forEach(item => {
                    if(item.getAttribute('data-page') === pageId) {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                });
            };

            document.body.addEventListener('click', function(e) {
                const target = e.target.closest('[data-target]');
                if(target) {
                    const pageId = target.getAttribute('data-target');
                    navigateTo(pageId);
                }
                const navItem = e.target.closest('.nav-item');
                if(navItem) {
                    const pageId = navItem.getAttribute('data-page');
                    navigateTo(pageId);
                }
            });

            // --- ä»»å‹™ Tab åˆ‡æ›é‚è¼¯ ---
            window.switchMissionTab = function(tabName, btnElement) {
                // 1. æŒ‰éˆ•æ¨£å¼åˆ‡æ›
                document.querySelectorAll('.mission-tab-btn').forEach(btn => btn.classList.remove('active'));
                btnElement.classList.add('active');

                // 2. å…§å®¹é¢æ¿åˆ‡æ›
                document.querySelectorAll('.mission-panel').forEach(panel => panel.classList.remove('active'));
                const targetPanel = document.getElementById('panel-' + tabName);
                if(targetPanel) {
                    targetPanel.classList.add('active');
                }
            }

            // --- è¨­å®šé å½ˆçª—é‚è¼¯ ---
            window.openRiskSettings = function() {
                document.getElementById('risk-setting-modal').style.display = 'flex';
            }
            window.closeRiskSettings = function() {
                document.getElementById('risk-setting-modal').style.display = 'none';
            }
            window.setRiskAndClose = function(type) {
                currentGlobalRisk = type;
                const labelMap = { 'conservative': 'ä¿å®ˆå‹', 'steady': 'ç©©å¥å‹', 'aggressive': 'ç©æ¥µå‹' };
                document.getElementById('settings-risk-label').innerText = labelMap[type] + ' >';
                
                closeRiskSettings();
                alert('è¨­å®šå·²æ›´æ–°ï¼');
            }


            // --- æµç¨‹å½ˆçª—é‚è¼¯ ---
            window.showProcessModal = function() {
                const modal = document.getElementById('process-modal');
                modal.style.display = 'flex';
                setTimeout(() => document.getElementById('step-1').classList.add('active'), 500);
                setTimeout(() => document.getElementById('step-2').classList.add('active'), 1500);
                setTimeout(() => document.getElementById('step-3').classList.add('active'), 2500);
                setTimeout(() => {
                    document.getElementById('step-4').classList.add('active');
                    document.getElementById('process-done-btn').style.display = 'block';
                }, 3500);
            }
            window.closeProcessModal = function() {
                document.getElementById('process-modal').style.display = 'none';
                navigateTo('page-invest');
            }

            // --- ç‰¹æ•ˆ ---
            function startConfetti() {
                const container = document.getElementById('confetti-container');
                container.innerHTML = '';
                const symbols = ['ğŸª™', 'âœ¨', 'ğŸ’°', 'ğŸŒŸ'];
                for(let i=0; i<30; i++) {
                    const el = document.createElement('div');
                    el.classList.add('confetti');
                    el.innerText = symbols[Math.floor(Math.random() * symbols.length)];
                    el.style.left = Math.random() * 100 + '%';
                    el.style.animationDuration = (2 + Math.random() * 3) + 's';
                    el.style.animationDelay = Math.random() * 2 + 's';
                    container.appendChild(el);
                }
            }

            // --- æŠ•è³‡é é‚è¼¯ ---
            let fundChartInstance = null;
            let allocationChartInstance = null;

            window.updateInvestPageUI = function(type) {
                const identityText = document.getElementById('identity-text');
                const identityCard = document.getElementById('identity-card');
                const identityIcon = document.getElementById('identity-icon');
                
                let lineData, allocData, allocLabels, allocColors, icon;
                
                if(type === 'conservative') {
                    identityText.innerText = 'ä¿å®ˆå‹æŠ•è³‡äºº (Conservative)';
                    identityCard.style.borderLeftColor = '#3498db'; 
                    identityCard.style.background = 'linear-gradient(to right, #ffffff, #f0f8ff)';
                    icon = 'ğŸ¢';
                    lineData = [100, 102, 103, 105, 106, 108]; 
                    allocLabels = ['å…¨çƒå‚µåˆ¸', 'è²¨å¹£å¸‚å ´', 'å¤§å‹æ¬Šå€¼è‚¡'];
                    allocData = [60, 30, 10];
                    allocColors = ['#3498db', '#bdc3c7', '#2ecc71'];
                } else if(type === 'steady') {
                    identityText.innerText = 'ç©©å¥å‹æŠ•è³‡äºº (Balanced)';
                    identityCard.style.borderLeftColor = '#00915a';
                    identityCard.style.background = 'linear-gradient(to right, #ffffff, #f0fff4)';
                    icon = 'âš–ï¸';
                    lineData = [100, 105, 110, 118, 125, 135];
                    allocLabels = ['å…¨çƒå‚µåˆ¸', 'ç§‘æŠ€è‚¡', 'æ–°èˆˆå¸‚å ´'];
                    allocData = [40, 30, 30];
                    allocColors = ['#3498db', '#e67e22', '#9b59b6'];
                } else if(type === 'aggressive') {
                    identityText.innerText = 'ç©æ¥µå‹æŠ•è³‡äºº (Aggressive)';
                    identityCard.style.borderLeftColor = '#e74c3c';
                    identityCard.style.background = 'linear-gradient(to right, #ffffff, #fff0f0)';
                    icon = 'ğŸš€';
                    lineData = [100, 110, 105, 130, 145, 160];
                    allocLabels = ['ç§‘æŠ€è‚¡', 'æ–°èˆˆå¸‚å ´', 'é«˜æ”¶ç›Šå‚µ'];
                    allocData = [50, 30, 20];
                    allocColors = ['#e67e22', '#9b59b6', '#e74c3c'];
                }
                
                if(identityIcon) identityIcon.innerText = icon;

                const ctxLine = document.getElementById('fundChart');
                if(fundChartInstance) fundChartInstance.destroy();
                
                fundChartInstance = new Chart(ctxLine, {
                    type: 'line',
                    data: {
                        labels: ['2020', '2021', '2022', '2023', '2024', '2025'],
                        datasets: [{
                            label: 'æ·¨å€¼èµ°å‹¢',
                            data: lineData,
                            borderColor: identityCard.style.borderLeftColor,
                            backgroundColor: 'rgba(0,0,0,0)',
                            borderWidth: 3,
                            pointRadius: 0,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: { x: { display: false }, y: { display: false } }
                    }
                });

                const ctxAlloc = document.getElementById('allocationChart');
                if(allocationChartInstance) allocationChartInstance.destroy();
                
                allocationChartInstance = new Chart(ctxAlloc, {
                    type: 'doughnut',
                    data: {
                        labels: allocLabels,
                        datasets: [{
                            data: allocData,
                            backgroundColor: allocColors,
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        cutout: '70%',
                        plugins: { legend: { display: false } }
                    }
                });

                const legendContainer = document.getElementById('allocation-legend');
                let legendHTML = '';
                allocLabels.forEach((label, index) => {
                    legendHTML += `
                        <div class="legend-item">
                            <div style="display:flex; align-items:center;">
                                <span class="legend-color" style="background:${allocColors[index]}"></span>
                                ${label}
                            </div>
                            <strong>${allocData[index]}%</strong>
                        </div>
                    `;
                });
                legendContainer.innerHTML = legendHTML;
            };

            function generateQRCode() {
                const qrContainer = document.getElementById("qrcode");
                qrContainer.innerHTML = "";
                new QRCode(qrContainer, {
                    text: "CDF-NEXT-USER-8899-WANG-STEADY",
                    width: 128,
                    height: 128,
                    colorDark : "#00915a",
                    colorLight : "#ffffff",
                    correctLevel : QRCode.CorrectLevel.H
                });
            }

            let expenseChartInstance = null;
            function drawExpenseChart() {
                const ctx = document.getElementById('expenseChart').getContext('2d');
                if(expenseChartInstance) expenseChartInstance.destroy();
                
                expenseChartInstance = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['é£²é£Ÿ', 'æ‰‹æ–/å¤–é€', 'äº¤é€š', 'éŠæˆ²', 'å…¶ä»–'],
                        datasets: [{
                            data: [35, 15, 10, 25, 15],
                            backgroundColor: ['#bdc3c7', '#e74c3c', '#95a5a6', '#f39c12', '#bdc3c7']
                        }]
                    },
                    options: { responsive: true, maintainAspectRatio: false }
                });
            }
            
            window.showQuizResult = function() {
                document.getElementById('quiz-modal').style.display = 'flex';
            }
            window.closeQuizModal = function() {
                document.getElementById('quiz-modal').style.display = 'none';
                window.navigateTo('page-rewards');
            }
        });
    </script>
</body>
</html>